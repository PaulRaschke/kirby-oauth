(function () {function d(e,o){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?d(Object(n),!0).forEach(function(o){h(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function h(e,o,n){return o in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n,e}function g(t,e,r,n,a,o,u){try{var s=t[o](u),i=s.value}catch($){return void r($)}s.done?e(i):Promise.resolve(i).then(n,a)}function j(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function u(t){g(o,n,a,u,s,"next",t)}function s(t){g(o,n,a,u,s,"throw",t)}u(void 0)})}}var c={name:"OAuth",props:{providers:{type:Array,default:function(){return[]}},error:{type:String,default:null}},computed:{providersForList:function(){return this.providers.map(function(t){return{id:t.id,class:"thathoff-oauth-provider-".concat(t.id),text:t.name,link:t.href,target:"_self",flag:{icon:"check",link:t.href,target:"_self"}}})}}};if(typeof c==="function"){c=c.options}Object.assign(c,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"thathoff-oauth-providers"},[_vm.error!==null?_c("div",{staticClass:"k-login-alert k-login-alert--oauth",on:{"click":function($event){_vm.error=null}}},[_c("span",[_vm._v(_vm._s(_vm.error))]),_vm._v(" "),_c("k-icon",{attrs:{"type":"alert"}})],1):_vm._e(),_vm._v(" "),_c("k-field",{attrs:{"name":"oauth","label":"Sign in with"}},[_c("k-list",{attrs:{"items":_vm.providersForList}})],1)],1)};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:"data-v-bd33c6",functional:undefined}}());var b={components:{"k-login-form":null,OAuth:c},data:function(){return{settings:{},providers:[],error:null}},created:function(){this.load()},methods:{load:function(){var t=this;return j(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.get("oauth/settings");case 2:return t.settings=e.sent,e.t0=Object,e.next=6,t.$api.get("oauth/providers");case 6:return e.t1=e.sent,t.providers=e.t0.values.call(e.t0,e.t1),e.next=10,t.$api.get("oauth/oauthError");case 10:t.error=e.sent.msg;case 11:case"end":return e.stop();}},e)}))()}}};if(typeof b==="function"){b=b.options}Object.assign(b,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",[_vm.settings.enabled===false||_vm.settings.onlyOauth===false?_c("k-login-form"):_vm._e(),_vm._v(" "),_vm.settings.enabled===true?_c("OAuth",{attrs:{"providers":_vm.providers,"error":_vm.error}}):_vm._e()],1)};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());panel.plugin("thathoff/oauth",{use:[{install:function(e){var o=e.options.components["k-login-view"].options.components["k-login-form"];b.components["k-login-form"]=o,e.options.components["k-login-view"].options.components=f(f({},e.options.components["k-login-view"].options.components),{},{"k-login-form":b})}}]});})();